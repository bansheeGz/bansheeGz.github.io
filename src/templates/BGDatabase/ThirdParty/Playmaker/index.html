#set page=Playmaker

<h4>Description</h4>
<p>
    Code Generator for <a href="https://assetstore.unity.com/packages/tools/visual-scripting/playmaker-368">Playmaker</a> creates custom Actions to access BGDatabase data (many fields are supported,
    but not all the fields)
</p>
<p>
    Apart from Code Generation, you can use Playmaker's <code>GetProperty</code> and <code>SetProperty</code> actions
    with Generated <a href="../../CodeGeneration/MonoBehaviourClasses">MonoBehaviour</a> to get/set any property
    from GameObject, hooked up to database.
</p>

<h4>Supported custom actions</h4>
With custom actions you have full control over database data- you can select/add/update/delete rows.
Custom actions are generated for each table
<table class="contentTable">
    <tr>
        <th>
            #
        </th>
        <th>
            Action
        </th>
        <th>
            Description
        </th>
    </tr>
    <tr>
        <td>1</td>
        <td>GetByIndex</td>
        <td>
            Retrieve field values from database by row's index. This is the best method to use inside for-each loop
        </td>
    </tr>
    <tr>
        <td>2</td>
        <td>GetById</td>
        <td>
            Retrieve field values from database by row's id.
        </td>
    </tr>
    <tr>
        <td>3</td>
        <td>GetByName</td>
        <td>
            Retrieve field values from database by row's name.
        </td>
    </tr>
    <tr>
        <td>4</td>
        <td>SetByIndex</td>
        <td>
            Set field values to database by row's index.
        </td>
    </tr>
    <tr>
        <td>5</td>
        <td>SetById</td>
        <td>
            Set field values to database by row's id.
        </td>
    </tr>
    <tr>
        <td>6</td>
        <td>SetByName</td>
        <td>
            Set field values to database by row's name.
        </td>
    </tr>
    <tr>
        <td>7</td>
        <td>Count</td>
        <td>
            Retrieve total number of rows
        </td>
    </tr>
    <tr>
        <td>8</td>
        <td>Create</td>
        <td>
            Create a new row
        </td>
    </tr>
    <tr>
        <td>9</td>
        <td>Delete</td>
        <td>
            Delete a row by its index
        </td>
    </tr>
</table>

<h4>Supported fields</h4>
<table class="contentTable">
    <tr>
        <th>
            Database Field
        </th>
        <th>
            Playmaker Field
        </th>
        <th>
            Comments
        </th>
    </tr>
    <tr>
        <td>int</td>
        <td>FsmInt</td>
        <td></td>
    </tr>
    <tr>
        <td>float</td>
        <td>FsmFloat</td>
        <td></td>
    </tr>
    <tr>
        <td>bool</td>
        <td>FsmBool</td>
        <td></td>
    </tr>
    <tr>
        <td>string</td>
        <td>FsmString</td>
        <td></td>
    </tr>
    <tr>
        <td>color</td>
        <td>FsmColor</td>
        <td></td>
    </tr>
    <tr>
        <td>rect</td>
        <td>FsmRect</td>
        <td></td>
    </tr>
    <tr>
        <td>vector2</td>
        <td>FsmVector2</td>
        <td></td>
    </tr>
    <tr>
        <td>vector3</td>
        <td>FsmVector3</td>
        <td></td>
    </tr>
    <tr>
        <td>quaternion</td>
        <td>FsmQuaternion</td>
        <td></td>
    </tr>
    <tr>
        <td>relationSingle</td>
        <td>FsmInt</td>
        <td>Playmakers int field stores the index of related row, or -1 if field is not set</td>
    </tr>
    <tr>
        <td>relationMultiple</td>
        <td>FsmArray[int]</td>
        <td>Playmakers int array field stores the related rows array of indices</td>
    </tr>
    <tr>
        <td>nested</td>
        <td>FsmArray[int]</td>
        <td>Just like relationMultiple, but read only</td>
    </tr>
    <tr>
        <td>GameObject</td>
        <td>FsmGameObject</td>
        <td>Prefab asset, field is readonly</td>
    </tr>
    <tr>
        <td>Object</td>
        <td>FsmObject</td>
        <td>Any Unity asset, field is readonly</td>
    </tr>
    <tr>
        <td>Material</td>
        <td>FsmMaterial</td>
        <td>Unity material asset, field is readonly</td>
    </tr>
    <tr>
        <td>Texture</td>
        <td>FsmTexture</td>
        <td>Unity texture asset, field is readonly</td>
    </tr>
    <tr>
        <td>AudioClip</td>
        <td>FsmObject</td>
        <td>Unity audio asset, field is readonly</td>
    </tr>
    <tr>
        <td>Font</td>
        <td>FsmObject</td>
        <td>Unity font asset, field is readonly</td>
    </tr>
    <tr>
        <td>Texture2D</td>
        <td>FsmObject</td>
        <td>Unity texture2D asset, field is readonly</td>
    </tr>
    <tr>
        <td>Sprite</td>
        <td>FsmObject</td>
        <td>Unity sprite asset, field is readonly</td>
    </tr>
    <tr>
        <td>Sprite[]</td>
        <td>FsmArray</td>
        <td>Unity sprite array asset, field is readonly</td>
    </tr>
</table>
<p>
    If field type is not supported, it will be omitted
</p>


<div>
    <h4>How to generate actions</h4>
    <p>
        Open BGDatabase window <code>Window->BGDatabase</code>
    </p>
    <p>
        Select <code>Settings</code> tab, and choose <code>Playmaker</code>
    </p>
    <div class="bg-image">
        <a href="#path images/BGDatabase/Playmaker1.png"><img style="width: 400px" src="#path images/BGDatabase/Playmaker1.png"></a>
    </div>
    <p>
        Fill parameters and press <code>Generate</code> button
    </p>

    <div class="importantNote">
        Once you chose your naming scheme <b>package</b> + <b>Classes name prefix</b>/<b>Field name prefix</b>
        and used your generated actions in PLaymaker's state machines, you should not change these settings,
        otherwise the references to these actions will be lost. The same applies to tables/fields names.
    </div>
</div>

<h4>Hints</h4>
<ol>
    <li>If you plan to use Addressables system- avoid using <code>[</code> and <code>]</code> symbols in your folders names, cause these symbols interfere with Addressables naming convention</li>
</ol>

<div>
    <h4>Parameters</h4>

    <table class="contentTable">
        <tr>
            <th>
                Parameter name
            </th>
            <th>
                Description
            </th>
        </tr>
        <tr>
            <td>Code Generator</td>
            <td>Class to use for code generation (use the default one)</td>
        </tr>
        <tr>
            <td>Source file</td>
            <td>Source file to use for generated C# classes (actions). All classes will be put into one single .cs file, which should be under your project folder </td>
        </tr>
        <tr>
            <td>Package</td>
            <td>Package (C# namespace) for generated classes. For example <code>MySpace</code>. You can safely leave this setting blank.</td>
        </tr>
        <tr>
            <td>Class names prefix</td>
            <td>
                Prefix to use for each class name.
                So if you use <code>P_</code> prefix, the final class (action) name for <code>MyTable</code> table and <code>GetById</code> action will be <code>P_MyTableGetById</code>.
                We have multiple code generators, so using different prefixes for different code generators helps to differentiate generated classes and avoid naming collisions
            </td>
        </tr>
        <tr>
            <td>Field names prefix</td>
            <td>Prefix to use for each generated property name. So if you use <code>f_</code> prefix, the final name for <code>intField</code> field will be <code>f_intField</code>.
                You can safely leave this setting blank.
            </td>
        </tr>
        <tr>
            <td>Action category</td>
            <td>
                Playmaker's action category to put all generated classes (actions) in. Default is <code>BansheeGz</code>
            </td>
        </tr>    </table>
    <div class="bg-image">
        <a href="#path images/BGDatabase/Playmaker2.png"><img style="width: 400px" src="#path images/BGDatabase/Playmaker2.png"></a>
    </div>
</div>

<h4>Example</h4>
<table class="contentTable">
    <tr>
        <th>
            Link
        </th>
        <th>
            Description
        </th>
    </tr>
    <tr>
        <td><a href="BGDatabasePlaymakerMin.cs">BGDatabasePlaymakerMin.cs</a></td>
        <td>
            Minimalistic example with single table and single name field
        </td>
    </tr>
    <tr>
        <td><a href="BGDatabasePlaymakerMax.cs">BGDatabasePlaymakerMax.cs</a></td>
        <td>
            Single table with all supported fields.
        </td>
    </tr>
</table>

<div>
    <h4>Additional downloads</h4>
    <ol>
        <li>Custom actions to support <a href="../../Addons/SaveLoad">SaveLoad addon</a> is available for download <a href="../../Downloads/RuntimeSaveLoadPlaymaker">here</a> </li>
        <li>Custom action to support unity assets loading from Addressables system is available for download <a href="../../Downloads/RuntimeAddressablesPlaymaker">here</a> </li>
    </ol>
</div>
