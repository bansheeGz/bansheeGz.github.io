<!doctype html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76367732-7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-76367732-7');
    </script>

    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="BG Database is a in-game data management system for Unity3D game engine">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    
    <title>BansheeGz</title>

    <!-- Page styles -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="../../css/font-awesome.min.css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.min.css">

    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/page.css">

    <link rel="icon" type="image/png" href="../../images/BGIcon.png"/>
</head>
<body>


<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<style>
    #aBox a {
        color: white;
        font: 15px Helvetica, Arial, Sans-Serif;
    }

    #bg-navigation a {
        background-position: 50px;
    }
</style>


<script>
    function writeEmail(whom, at) {
        document.write("<a href='mail" + "to:" + whom + "@" + at + "'>" + whom + "@" + at + "</a>");
    }
</script>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

    <!--======================================================       Root  Header               -->
    <div class="bg-header mdl-layout__header mdl-layout__header--waterfall">
        <div class="mdl-layout__header-row" id="header">
          <span style="margin-left: -40px;">
              <a class="bg-header-a" href="/"><img src="../../images/BGIconBig.png"></a>
          </span>
            <!-- Add spacer, to align navigation to the right in desktop -->
            <div class="mdl-layout-spacer"></div>
            <!-- Navigation -->
            <div class="bg-navigation-bag" id="bg-navigation">
                <nav class="bg-navigation mdl-navigation">
                    <a class="mdl-navigation__link mdl-typography--text-uppercase bg-navigation_link_active"
                       href="../../BGDatabase">BG`Database</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../BGLocalization">BG`Localization</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../BGCurve">BG`Curve</a>
<!--                    <a class="mdl-navigation__link mdl-typography&#45;&#45;text-uppercase "-->
<!--                       href="../../BGCurve/BGSplineColliders">BG`Spline_Colliders</a>-->
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../Blog">Blog</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../Support">Support</a>
                </nav>
            </div>
            <button class="bg-menu-mobile mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect"
                    id="more-button">
                <i class="material-icons">more_vert</i>
            </button>
            <ul class="bg-menusub-mobile mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect"
                for="more-button">
                <li class="mdl-menu__item"><a href="../../BGDatabase">BG Database</a></li>
                <li class="mdl-menu__item"><a href="../../BGLocalization">BG Localization</a></li>
                <li class="mdl-menu__item"><a href="../../BGCurve">BG Curve</a></li>
                <li class="mdl-menu__item"><a href="../../Support">Support</a></li>
            </ul>
        </div>
    </div>

<!--        <div style="min-height: 5px;background-color: #CCCCCC"></div>-->
<!--        <div id="aBox" style="background-color: #ff69b4;height: 20px;color: white;text-align: center;">
            <b>
                MESSAGE HERE
        </b>
    </div>-->

    <div class="mdl-layout__content">
        <a name="top"></a>

        <!--======================================================        Content (from Root)              -->
        




<link rel="stylesheet" href="../../css/bgdatabase.css">
<link rel="stylesheet" href="../../css/magnific-popup.css">
<script src="../../js/jquery.magnific-popup.min.js"></script>

<script>
    $(document).ready(function () {
        $('.bg-image').magnificPopup({
            delegate: 'a',
            type: 'image',
//            gallery:{enabled:true},
            closeOnContentClick: true
        });
    });
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/rainbow.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!--======================================================       BG Database Header               -->


<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--hide-phone bg-sm  mdl-shadow--3dp">
        <ul id="leftmenu">
            <li class="pli databaseicon ">
                <script async src="https://cse.google.com/cse.js?cx=e1930f586f83c4862">
                </script>
                <div class="gcse-searchbox-only"></div>
                <a class="pa" href="../../BGDatabase">BG Database Home</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Setup">Setup</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/HowToUse">How to use</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/GUIOverview">GUI overview</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/GUITips">GUI tips and tricks</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeExamples">Code Examples</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Videos">Videos</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/SupportedFields">Field types</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ExportImport">Export Import</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/DataBinding">Data Binding</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/GraphEditor">Graph Editor</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/MergeTool">Merge Tool</a>
                    </li>
                    <li class="cli  plic ">
                        <a class="ca" href="../../BGDatabase/Misc">Misc</a>
                    </li>
                    <li class="cli downloadicon ">
                        <a class="ca" href="../../BGDatabase/Downloads">Downloads</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/CodeGeneration">Code Generation</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeGeneration/ExtensionClasses">Extension Classes</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeGeneration/MonoBehaviourClasses">MonoBehavior Classes</a>
                    </li>
<!--
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeGeneration/DnaClasses">Dna Classes</a>
                    </li>
-->
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/ThirdParty">Third-Party Integration</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/Excel">Excel</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/GoogleSheets">Google Sheets</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/Bolt">Unity Visual Scripting (ex-Bolt)</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/Playmaker">Playmaker</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/FlowCanvas">Flow Canvas</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/NodeCanvas">Node Canvas</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/BehaviorDesigner">Behavior Designer</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/UNode">UNode</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/GameCreator">Game Creator</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/Addons">Addons</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/SaveLoad">Save Load</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/CodeGeneration">Code Generation</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/LazyLoad">Lazy Load</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/LiveUpdate">Live Update</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Multithreading">Multithreading</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Modding">Modding</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Settings">Settings</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Partition">Partitions</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Diagram">Diagram</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Localization">Localization</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/API">API</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGRepo">BGRepo</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGMetaEntity">BGMetaEntity</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGEntity">BGEntity</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGField">BGField</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="mdl-cell--hide-desktop mdl-cell--hide-tablet mdl-cell--4-col-phone">
        <a class="pa" href="../../BGDatabase">BG BGDatabase Home</a>
        <a class="pa" href="../../BGDatabase/Setup">Setup</a>
        <a class="pa" href="../../BGDatabase/HowToUse">How To Use</a>
        <a class="pa" href="../../BGDatabase/Videos">Videos</a>
        <a class="pa" href="../../BGDatabase/ExampleBreakdown">Example Breakdown</a>
        <a class="pa" href="../../BGDatabase/SupportedFields">Fields</a>
        <a class="pa" href="../../BGDatabase/ExportImport">Export Import</a>
        <a class="pa" href="../../BGDatabase/DataBinding">Data Binding</a>
        <a class="pa" href="../../BGDatabase/Events">Events</a>
        <a class="pa" href="../../BGDatabase/CodeGeneration">Code Generation</a>
        <a class="pa" href="../../BGDatabase/Addons">Addons</a>
    </div>
    <div class="mdl-cell mdl-cell--9-col mdl-cell--6-col-tablet mdl-cell--3-col-phone">
        <div class="bg-main mdl-shadow--3dp">
            <div class="bg-main-title">
                <h3>Misc</h3>
            </div>

            <!--======================================================        BG Database Content              -->
            <div id="content">
            

<h4>Table of content</h4>
<div>
    <ol>
        <li><a href="#editor">Editor assembly</a></li>
        <li><a href="#events">Events</a></li>
        <li><a href="#validation">Validation</a></li>
        <li><a href="#keys">Keys and indexes</a></li>
        <li><a href="#views">Views</a></li>
        <li><a href="#commandline">Command line</a></li>
        <li><a href="#customFields">Custom fields</a></li>
        <li><a href="#defaultFieldValue">Default field value</a></li>
        <li><a href="#cellButtonText">Overriding cell button text</a></li>
        <li><a href="#databaseReferences">Referencing tables, fields, rows and cells from your own MonoBehaviour scripts</a></li>
        <li><a href="#guiExt">Database GUI extensions</a></li>
    </ol>
</div>

<h4 id="editor">Editor assembly</h4>

<p>
    Mostly, database works inside Editor assembly the same way as it works at runtime, meaning you can develop your own Editor tools on top of the database.
    Use generated classes to access database.
</p>
<p>
    To save database in Unity Editor via C# code from Editor assembly, use this line:
</p>
<pre class="nomargin"><code class="language-csharp">    //This will work ONLY inside Unity Editor from Editor Assembly
    BansheeGz.BGDatabase.Editor.BGRepoSaver.SaveRepo();</code></pre>
<p>
    To save database in Unity Editor via C# code from Runtime assembly, use this line:
</p>
<pre class="nomargin"><code class="language-csharp">    //This will work ONLY inside Unity Editor from Runtime or Editor Assembly
    BansheeGz.BGDatabase.BGUtil.SaveDatabaseInUnityEditor();</code></pre>
<p>
    To assign unity asset field values, use SetAsset method, defined on each unity asset field and available in Editor assembly (this method is not available at runtime assembly)
</p>
<pre class="nomargin"><code class="language-csharp">    SetAsset(int entityIndex, UnityEngine.Object asset)</code></pre>
<p>
    The method is defined at the base Unity asset field, which is BGFieldUnityAssetA&lt;T&gt; (T is the value type), so you need to downcast BGField to this class
    if you do not use <a href="../Addons/CodeGeneration">CodeGen addon</a>. If you use CodeGen addon,
    you can access the field directly without need to downcast, using {TableClass}._{fieldName} notation,
    see more details <a href="https://forum.unity.com/threads/bg-database-inmemory-database-excel-google-sheets-syncing-codegen-save-load-support.529740/page-11#post-8780611">here</a>
</p>

<h4 id="events">Events</h4>

<p>
    Events let use listen to database changes, like changing the field or entity, adding or removing entities. Make sure
</p>
<ol>
    <li>To pair adding a listener with removing a listener to prevent memory leaks</li>
    <li>all events handlers have try/catch block to <a href="https://stackoverflow.com/a/8745599">prevent exception being fired from event handlers</a></li>
</ol>
<p>
    Following events are available:
</p>
<table class="contentTable">
    <tr>
        <th width="20%">
            Event
        </th>
        <th>
            Description
        </th>
    </tr>
    <tr>
        <td>Field value changed</td>
        <td>It is fired when provided field value change (any entity)</td>
    </tr>
    <tr>
        <td>Entity is updated</td>
        <td>It is fired when provided entity value change (any field)</td>
    </tr>
    <tr>
        <td>Entity is deleted</td>
        <td>It is fired when provided entity deleted</td>
    </tr>
    <tr>
        <td>Any entity is updated</td>
        <td>It is fired when any entity updated (any field)</td>
    </tr>
    <tr>
        <td>Any entity is added</td>
        <td>It is fired when new entity is added</td>
    </tr>
    <tr>
        <td>Any entity is deleted</td>
        <td>It is fired when any entity deleted</td>
    </tr>
    <tr>
        <td>Before any entity deleted</td>
        <td>It is fired before any entity is deleted</td>
    </tr>
    <tr>
        <td>Batch update event</td>
        <td>Batch update event is fired when BGRepo.I.Events.Batch(Action action); method is used.
            When this method is used, no individual events will be fired while action is being executed
            and one single batch event will be fired when action is executed.
            This is required for performance's sake when massive changes to database should be done without firing individual events
        </td>
    </tr>
    <tr>
        <td>Any change event</td>
        <td>It is fired on any database change</td>
    </tr>
</table>
<p>
    For usage example, see this <a href="../Downloads/EventListenersDemo.txt">demo C# script</a>
</p>


<h4 id="validation">Validation</h4>

<p>
    Data validation allows to set the rules to validate data.
    Validation works in Unity Editor only and has no effect at runtime.
    To turn on validation, press on "Validation off" button at the top left of BGDatabase window.
</p>

<h6>Validation types</h6>
<ol>
    <li><a href="#data">Database data validation</a></li>
    <li><a href="#scene">Scene objects validation</a> (Binders and BGEntityGo components)</li>
</ol>

<h6 id="data">Database data validation</h6>
<table class="contentTable">
    <tr>
        <th>
            Validation rule
        </th>
        <th>
            Description
        </th>
    </tr>
    <tr>
        <td>Entity name is unique</td>
        <td>If entity has a name, it should be unique</td>
    </tr>
    <tr>
        <td>Entity name is empty</td>
        <td>Entities should have no name (names can be cleared under Configuration tab)</td>
    </tr>
    <tr>
        <td>Entity is singleton</td>
        <td>Only one single entity should exist</td>
    </tr>
    <tr>
        <td>Field is required</td>
        <td>Field should have some value. Only class-based fields are affected, cause struct-based fields always have a value</td>
    </tr>
    <tr>
        <td>Key is unique</td>
        <td>Each <a href="#keys">key</a>, marked as unique, should have 0-1 matching rows. If there are more than 1 matching row, it's considered to be a rule violation.</td>
    </tr>
</table>
<p>
    To review validation log, hover over red E icons as shown on the screenshot below.
    E icon is shown only if at least one error exists.
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Validation1.png"><img style="width: 400px" src="../../images/BGDatabase/Validation1.png"></a>
</div>

<h6 id="scene">Scene objects validation</h6>
<p>
    Following BGDatabase scene components can also be validated (using Scene Explorer tab).
</p>
<ol>
    <li>BGEntityGo components</li>
    <li>Generated Monobehaviour classes (extending from BGEntityGo)</li>
    <li><a href="../DataBinding">Data binders</a></li>
</ol>
<p>
    Any component, which has an error, will be highlighted.
</p>


<h4 id="keys">Keys and indexes</h4>
<ol>
    <li>Key consist of 1-n fields and can be used to look up row(s) quickly.
        It also can be used in rows <a href="#validation">validation</a>
    </li>
    <li>
        Index has a reference to a single field and can be used for effective range scan
    </li>
</ol>
<p>
    Here is a table, comparing different row(s) retrieval methods efficiency
</p>
<table class="contentTable dTable">
    <tr>
        <th>Method</th>
        <th>Underlying structure</th>
        <th>Time complexity</th>
        <th>Comments</th>
    </tr>
    <tr>
        <td>meta.GetEntity(int index)</td>
        <td>list</td>
        <td>O(1)</td>
        <td>fastest method</td>
    </tr>
    <tr>
        <td>meta.GetEntity(BGId Id)</td>
        <td>hashtable</td>
        <td>O(1)</td>
        <td></td>
    </tr>
    <tr>
        <td>GetEntity(string name)</td>
        <td>hashtable</td>
        <td>O(1)</td>
        <td></td>
    </tr>
    <tr>
        <td>key.GetEntityByKey(params object[] keys)</td>
        <td>hashtable</td>
        <td>O(1)</td>
        <td></td>
    </tr>
    <tr>
        <td>index.FindEntitiesByIndex(indexOperator)</td>
        <td>b-tree</td>
        <td>O(log n)</td>
        <td>if index field data is not <a href="https://stackoverflow.com/a/35516532" target="_blank">skewed</a></td>
    </tr>
    <tr>
        <td>meta.FindEntity(predicate), meta.FindEntities(predicate)</td>
        <td>N/A</td>
        <td>O(n), fullscan</td>
        <td></td>
    </tr>
</table>

<h6>Keys</h6>
<p>
    Following fields can be added to a key: bool, int, long, decimal, bool?, int?, long?, string, text, enum, relationSingle.
</p>
<p>
    You can access the matching row(s) directly without searching, using BGKey class. Available options:
</p>
<ol>
    <li>Use <a href="../CodeGeneration/ExtensionClasses#whatIsGenerated">generated methods (recommended)</a></li>
    <li>Use basic API. To access the key, use <code>BGMetaEntity.GetKey({keyName})</code> method. To get a row(s), use <code>BGKey.GetEntityByKey</code> or <code>BGKey.GetEntitiesByKey</code> methods
    </li>
    <li>If you use Visual Scripting assets, you can use generated unit/node if it's supported</li>
</ol>


<p>
    Keys make row(s) access faster, but uses extra memory and may slow down write (update) operations, so do not use keys for data, which is updated frequently.
</p>
<div class="bg-image">
    <a href="../../images/Blog/Blog14.png"><img style="width: 400px" src="../../images/Blog/Blog14.png"></a>
</div>

<h6>Indexes</h6>
<p>
    Indexes enables row(s) range scan fast operations, but uses extra memory and may slow down write (update) operations.
    Currently only single field index is supported.
    Available options to use an index:
</p>
<ol>
    <li>Use <a href="../CodeGeneration/ExtensionClasses#whatIsGenerated">generated methods (recommended)</a></li>
    <li>Use basic API. To access the index use <code>BGMetaEntity.GetIndex({indexName})</code> method. To query rows use <code>index.FindEntitiesByIndex</code> method</li>
</ol>

<h4 id="views">Views</h4>
<p>
    Views are virtual table, which does not have its own rows and used with view relational fields.
    Read more about views <a href="../../Blog/BGDatabase-v1-7-5-Views-and-viewrelational-fields">here</a>
</p>

<h4 id="commandline">Command Line</h4>
<p>
    Command line utility (Settings->Command line) let you run DDL-like commands with simplified syntax.
</p>
<p>
    Syntax is (use empty line to separate commands):
</p>
<pre>
    COMMAND [Options]
    [Additional options]
</pre>
<p>
    Available commands:
</p>
<ol>
    <li>CREATE TABLE [TableName]<br>
        [FieldName] [FieldType]
    </li>
    <li>ALTER TABLE [TableName]<br>
        ADD [FieldName] [FieldType]<br>
        DROP [FieldName]
    </li>
    <li>DROP TABLE [TableName]</li>
</ol>
<p>
    Example:
</p>
<pre>
    CREATE TABLE MyTable
    MyField1 int
    MyField2 bool

    ALTER TABLE MyTable
    ADD MyField3 int
    DROP MyField1

    DROP TABLE MyTable
</pre>

<h4 id="customFields">Custom fields implementation guide</h4>
<ol>
    <li>Do not use custom fields unless all other alternatives are much worse.
        For example, if your custom field has two properties (int and float) there is no need to create a custom field,
        you can use two basic fields instead (int and float) to store the values.
    </li>
    <li>
        Do not try to create your custom field in your actual project.
        Create and test your custom field using a new, empty project.
        Make sure it works correctly before transferring this field to your project.
        A bug in your implementation can break the whole database
    </li>
    <li>
        Use existing fields implementations as examples.
        Fields implementation sources can be found in Assets\BansheeGz\BGDatabase\Scripts\BGDatabaseSourceCode.unitypackage package (Database\Field\*).
        Fields managers implementation sources can be found in Assets\BansheeGz\BGDatabase\Editor\Scripts\BGDatabaseEditorSourceCode.unitypackage package (Database\Field\*).
    </li>
    <li>
        To create a custom field you need to create two C# classes:
        <ol>
            <li>Class for the field (in runtime assembly)</li>
            <li>Class for the field's manager (in Editor assembly)</li>
        </ol>
    </li>
    <li>
        [Important] Do not try to create your classes from scratch, extend them from existing classes.<br/>
        For your field class:
        <ol>
            <li>If your field value is a class extend your field class from BGFieldCachedClassA class</li>
            <li>If your field value is a struct extend your field class from BGFieldCachedStructA class</li>
        </ol>
        For your field's manager class:
        <ol>
            <li>If your field value can be edited "in place" (like primitive fields: int, float, string)- extend your field's manager class from BGFieldManagerInlinedA class</li>
            <li>If your field value can be edited in popup window, which can be opened by clicking on cell button
                (like complex fields: bounds, assets)- extend your field's manager class from BGFieldManagerWithButtonA class
            </li>
        </ol>
    </li>
    <li>
        The methods/properties, which need to be implemented for your field class:
        <ol>
            <li>ToBytes/FromBytes- for binary serialization</li>
            <li>ToString/FromString- for string serialization</li>
            <li>CreateFieldFactory- utility method for creating new fields</li>
            <li>Implement ICloneable interface for your value type if it's a class (not struct)</li>
            <li>ValueSize property if your value type is a struct</li>
        </ol>
    </li>
    <li>
        If you have difficulties implementing your own custom field- contact us and send us full source code for your value type (class/struct).
        You can skip its methods but all fields which needs to be saved inside database need to be included.
    </li>
</ol>

<h4 id="defaultFieldValue">Default field value</h4>
<p>
    Default field value is the default value for new rows, i.g. it's the value for rows, created after this default value is set.
    Default field value is assigned at the moment a row is created and does not affect existing rows values.
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Misc1.png"><img style="width: 400px" src="../../images/BGDatabase/Misc1.png"></a>
</div>
<p>
    Default field value is provided as a string value.
    Each field type has its own string format, for example for int values it's an int constant (10), for float value it's a float constant (10.1), for bool value it's 0 or 1.
    If you are not sure which string format to use for your particular field type- create a row with the value,
    you want to use as a default value and <a href="../ThirdParty/Excel">export it to Excel</a>.
    Than copy Excel cell value and paste it to "Default value" column.
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Misc2.png"><img style="width: 400px" src="../../images/BGDatabase/Misc2.png"></a>
</div>

<h4 id="cellButtonText">Overriding cell button text</h4>
<p>
    There is an extension technique, which can be used for overriding cell button text for button-based fields.
    You can provide C# class or <a href="../GraphEditor">calculation graph</a>, which can return custom text, based on database values.
    For example, let's say you have a <code>Weapon</code> table with a nested <code>WeaponDamage</code> table and each row of the nested table has
    <code>power</code> (int) and <code>damageType</code> (singleRelation) fields. The <code>name</code> field for the nested table is disabled and not used.
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Misc3.png"><img style="width: 400px" src="../../images/BGDatabase/Misc3.png"></a>
</div>
<p>
    The default button text for the nested table is composed of the nested rows names, but since we do not use the <code>name</code> field, the button caption is
    <code>[2] [no name] | [no name]</code>, which is not very informative
</p>
<p>
    The solution for this problem is providing your own C# class (or <a href="../GraphEditor">calculation graph</a>), which can be used for button text calculation.
    Below is the C# class example, which includes the number of related rows with <code>power</code> and <code>damageType</code> fields values to the button text
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Misc4.png"><img style="width: 400px" src="../../images/BGDatabase/Misc4.png"></a>
</div>

<details>
    <summary>The C# code for custom button text provider</summary>
    <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase.Editor;

//this class uses CodeGen addon generated classes
public class WeaponEffectsButtonText : BGButtonTextProviderI
{
    public BGButtonTextResponse GetButtonText(BGButtonTextRequest request)
    {
        var response = new BGButtonTextResponse();
        var entity = (D_Weapon)request.Entity;
        var damageTypes = entity.WeaponDamage;
        if (damageTypes == null || damageTypes.Count == 0) response.Text = "No value";
        else
        {
            response.Text += $"[{damageTypes.Count}] ";
            for (var i = 0; i < damageTypes.Count; i++)
            {
                var damageType = damageTypes[i];
                if (i != 0) response.Text += " | ";
                response.Text += (damageType.damageType?.name ?? "[not set]") + ": " + damageType.power;
            }
        }
        return response;
    }
}</code></pre>
</details>
<p>
    To assign the custom button text provider to your field, use <code>M</code> field's menu and <code>Custom button text provider</code> menu item
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Misc5.png"><img style="width: 400px; height: 200px;" src="../../images/BGDatabase/Misc5.png"></a>
</div>

<h4 id="databaseReferences">Referencing tables, fields, rows and cells from your own MonoBehaviour scripts</h4>
<p>
    This section described methods for creating a serializable references to tables, fields, rows and cells.
    For regular database access use <a href="../Addons/CodeGeneration">CodeGen addon</a> generated classes or <a href="../API">basic API</a>
</p>
<table class="contentTable">
    <tr>
        <th>
            How to reference a
        </th>
        <th>
            Method
        </th>
        <th>
            Screenshot
        </th>
    </tr>
    <tr>
        <td rowspan="2">
            Table
        </td>
        <td>
            Use BGMetaReference class
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc6.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc6.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase;
using UnityEngine;

public class Temp : MonoBehaviour
{
    public BGMetaReference table;

    private void Start()
    {
        BGMetaEntity meta = table.Meta;
    }
}
</code></pre>
            </details>
        </td>
    </tr>
    <tr>
        <td rowspan="4">
            Field
        </td>
        <td>
            Option #1. Use BGFieldReference class
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc7.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc7.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase;
using UnityEngine;

public class Temp : MonoBehaviour
{
    public BGFieldReference field;

    private void Start()
    {
        BGField dbField = field.Field;
    }
}</code></pre>
            </details>
        </td>
    </tr>
    <tr>
        <td>
            Option #2. Use field reference class, generated by <a href="../Addons/CodeGeneration">CodeGen addon</a>
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc8.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc8.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase;
using UnityEngine;

public class Temp : MonoBehaviour
{
    //D_Weapon_FieldRef class is generated by CodeGen addon
    public D_Weapon_FieldRef field;

    private void Start()
    {
        BGField dbField = field.Field;
    }
}</code></pre>
            </details>
        </td>
    </tr>
    <tr>
        <td rowspan="8">
            Row
        </td>
        <td>
            Option #1. Use <a href="../CodeGeneration/MonoBehaviourClasses">MonoBehaviour generated components</a>
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc9.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc9.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using UnityEngine;

public class Temp : MonoBehaviour
{
    private void Start()
    {
        // M_Weapon is a generated class
        M_Weapon weapon = GetComponent&lt;M_Weapon&gt;();
        print($"Weapon {weapon.name}");
    }
}</code></pre>
            </details>
        </td>
    </tr>
    <tr>
        <td>
            Option #2. Use BGEntityGo component (can reference a row from any table but no generated properties/methods)
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc10.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc10.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase;
using UnityEngine;

public class Temp : MonoBehaviour
{
    private void Start()
    {
        BGEntityGo weapon = GetComponent&lt;BGEntityGo&gt;();
        BGEntity entity = weapon.Entity;
    }
}</code></pre>
            </details>
        </td>
    </tr>
    <tr>
        <td>
            Option #3. Use classes, generated by <a href="../Addons/CodeGeneration">CodeGen addon</a>
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc11.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc11.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using UnityEngine;

public class Temp : MonoBehaviour
{
    public D_Weapon_RowRef row;

    private void Start()
    {
        // D_Weapon class is also generated by CodeGen addon
        D_Weapon dbRow = row.Entity;
    }
}</code></pre>
            </details>
        </td>
    </tr>
    <tr>
        <td>
            Option #4. Use BGEntityReference class
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc12.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc12.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase;
using UnityEngine;

public class Temp : MonoBehaviour
{
    public BGEntityReference row;

    private void Start()
    {
        BGEntity dbRow = row.GetEntity();
    }
}</code></pre>
            </details>
        </td>
    </tr>
    <tr>
        <td rowspan="2">
            Cell
        </td>
        <td>
            Cell includes table, field and row. Use BGCellReference class
        </td>
        <td>
            <div class="bg-image">
                <a href="../../images/BGDatabase/Misc13.png"><img style="width: 200px; height: 30px;" src="../../images/BGDatabase/Misc13.png"></a>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <details>
                <summary>Code example</summary>
                <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase;
using UnityEngine;

public class Temp : MonoBehaviour
{
    public BGCellReference cell;

    private void Start()
    {
        BGEntity dbRow = cell.GetEntity();
        BGField dbField = cell.Field;
        print(cell.Value);
    }
}</code></pre>
            </details>
        </td>
    </tr>
</table>

<h4 id="guiExt">Database GUI extensions</h4>
<p>
    If you want to add your own utilities to database GUI, you can do this.
    Custom menus can be created for table, field, row or for the whole database.
    You need to create your own C# class, inherit it from specific class and place your script under Editor assembly (see the examples below).
    The menu items placement is shown on the screenshot below.
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Misc14.png"><img style="width: 400px" src="../../images/BGDatabase/Misc14.png"></a>
</div>

<details>
    <summary>Code example</summary>
    <pre class="nomargin"><code class="language-csharp">using BansheeGz.BGDatabase;
using BansheeGz.BGDatabase.Editor;
using UnityEditor;

//custom menu item for table
public class CustomMetaMenu : BGMenuItemMetaDefault
{
    public override string GetMenuName(BGMetaEntity meta) => $"Custom menu for table {meta.Name}";
    public override void Run(BGMetaEntity meta) => EditorUtility.DisplayDialog("Information", $"Custom menu for {meta.Name} table clicked!", "Ok");
}

//custom menu item for field
public class CustomFieldMenu : BGMenuItemFieldDefault
{
    public override string GetMenuName(BGField field) => $"Custom menu for field {field.Name}";
    public override void Run(BGField field) => EditorUtility.DisplayDialog("Information", $"Custom menu for {field.Name} field clicked!", "Ok");
}
//custom menu item for entity
public class CustomEntityMenu : BGMenuItemEntityDefault
{
    public override string GetMenuName(BGEntity entity) => $"Custom menu for row {entity.Name}";
    public override void Run(BGEntity entity) => EditorUtility.DisplayDialog("Information", $"Custom menu for {entity.Name} row clicked!", "Ok");
}

//custom menu item for repo
public class CustomRepoMenu : BGMenuItemRepoDefault
{
    public override string GetMenuName(BGRepo repo) => $"Custom menu for DB";
    public override void Run(BGRepo repo) => EditorUtility.DisplayDialog("Information", $"Custom menu for DB clicked!", "Ok");
}</code></pre>
</details>
            </div>

            <!--======================================================       BG Database Footer               -->
        </div>

    </div>
</div>



        <!--======================================================      Root Footer               -->
        <footer class="bg-footer mdl-mega-footer" style="clear:both;">
            <div class="mdl-mega-footer--top-section">
                <div class="mdl-mega-footer--middle-section bg-footer-email">
                    <table>
                        <tr>
                            <td>
                                <script language="JavaScript">
                                    writeEmail("support", "bansheegz.com")
                                </script>
                            </td>
                            <td>
                                or
                            </td>
                            <td>
                                <script language="JavaScript">
                                    writeEmail("admin", "bansheegz.com")
                                </script>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div style="text-align: center">
                <div id="share" style="display: inline-block;"></div>
            </div>
        </footer>
    </div>
</div>


</div>

<script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>

</body>
</html>
