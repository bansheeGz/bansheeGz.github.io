<!doctype html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76367732-7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-76367732-7');
    </script>

    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="BG Database is a in-game data management system for Unity3D game engine">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    
    <title>BansheeGz</title>

    <!-- Page styles -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="../../css/font-awesome.min.css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.min.css">

    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/page.css">

    <link rel="icon" type="image/png" href="../../images/BGIcon.png"/>
</head>
<body>


<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<style>
    #aBox a {
        color: white;
        font: 15px Helvetica, Arial, Sans-Serif;
    }

    #bg-navigation a {
        background-position: 50px;
    }
</style>


<script>
    function writeEmail(whom, at) {
        document.write("<a href='mail" + "to:" + whom + "@" + at + "'>" + whom + "@" + at + "</a>");
    }
</script>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

    <!--======================================================       Root  Header               -->
    <div class="bg-header mdl-layout__header mdl-layout__header--waterfall">
        <div class="mdl-layout__header-row" id="header">
          <span style="margin-left: -40px;">
              <a class="bg-header-a" href="/"><img src="../../images/BGIconBig.png"></a>
          </span>
            <!-- Add spacer, to align navigation to the right in desktop -->
            <div class="mdl-layout-spacer"></div>
            <!-- Navigation -->
            <div class="bg-navigation-bag" id="bg-navigation">
                <nav class="bg-navigation mdl-navigation">
                    <a class="mdl-navigation__link mdl-typography--text-uppercase bg-navigation_link_active"
                       href="../../BGDatabase">BG`Database</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../BGLocalization">BG`Localization</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../BGCurve">BG`Curve</a>
<!--                    <a class="mdl-navigation__link mdl-typography&#45;&#45;text-uppercase "-->
<!--                       href="../../BGCurve/BGSplineColliders">BG`Spline_Colliders</a>-->
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../Blog">Blog</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../Support">Support</a>
                </nav>
            </div>
            <button class="bg-menu-mobile mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect"
                    id="more-button">
                <i class="material-icons">more_vert</i>
            </button>
            <ul class="bg-menusub-mobile mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect"
                for="more-button">
                <li class="mdl-menu__item"><a href="../../BGDatabase">BG Database</a></li>
                <li class="mdl-menu__item"><a href="../../BGLocalization">BG Localization</a></li>
                <li class="mdl-menu__item"><a href="../../BGCurve">BG Curve</a></li>
                <li class="mdl-menu__item"><a href="../../Support">Support</a></li>
                <li class="mdl-menu__item"><a href="../../About">About Us</a></li>
            </ul>
        </div>
    </div>

<!--        <div style="min-height: 5px;background-color: #CCCCCC"></div>-->
<!--        <div id="aBox" style="background-color: #ff69b4;height: 20px;color: white;text-align: center;">
            <b>
                MESSAGE HERE
        </b>
    </div>-->

    <div class="mdl-layout__content">
        <a name="top"></a>

        <!--======================================================        Content (from Root)              -->
        




<link rel="stylesheet" href="../../css/bgdatabase.css">
<link rel="stylesheet" href="../../css/magnific-popup.css">
<script src="../../js/jquery.magnific-popup.min.js"></script>

<script>
    $(document).ready(function () {
        $('.bg-image').magnificPopup({
            delegate: 'a',
            type: 'image',
//            gallery:{enabled:true},
            closeOnContentClick: true
        });
    });
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/rainbow.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!--======================================================       BG Database Header               -->


<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--hide-phone bg-sm  mdl-shadow--3dp">
        <ul id="leftmenu">
            <li class="pli databaseicon ">
                <a class="pa" href="../../BGDatabase">BG Database Home</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Setup">Setup</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/HowToUse">How to use</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/GUIOverview">GUI overview</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/GUITips">GUI tips and tricks</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeExamples">Code Examples</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Videos">Videos</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/SupportedFields">Field types</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ExportImport">Export Import</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/DataBinding">Data Binding</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/GraphEditor">Graph Editor</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/MergeTool">Merge Tool</a>
                    </li>
                    <li class="cli  plic ">
                        <a class="ca" href="../../BGDatabase/Misc">Misc</a>
                    </li>
                    <li class="cli downloadicon ">
                        <a class="ca" href="../../BGDatabase/Downloads">Downloads</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/CodeGeneration">Code Generation</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeGeneration/ExtensionClasses">Extension Classes</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeGeneration/MonoBehaviourClasses">MonoBehavior Classes</a>
                    </li>
<!--
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/CodeGeneration/DnaClasses">Dna Classes</a>
                    </li>
-->
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/ThirdParty">Third-Party Integration</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/Excel">Excel</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/GoogleSheets">Google Sheets</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/Bolt">Unity Visual Scripting (ex-Bolt)</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/Playmaker">Playmaker</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/FlowCanvas">Flow Canvas</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/NodeCanvas">Node Canvas</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/BehaviorDesigner">Behavior Designer</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/UNode">UNode</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/ThirdParty/GameCreator">Game Creator</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/Addons">Addons</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/SaveLoad">Save Load</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/CodeGeneration">Code Generation</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/LazyLoad">Lazy Load</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/LiveUpdate">Live Update</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Multithreading">Multithreading</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Modding">Modding</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Settings">Settings</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Partition">Partitions</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/Addons/Localization">Localization</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../BGDatabase/API">API</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGRepo">BGRepo</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGMetaEntity">BGMetaEntity</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGEntity">BGEntity</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../BGDatabase/API/BGField">BGField</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="mdl-cell--hide-desktop mdl-cell--hide-tablet mdl-cell--4-col-phone">
        <a class="pa" href="../../BGDatabase">BG BGDatabase Home</a>
        <a class="pa" href="../../BGDatabase/Setup">Setup</a>
        <a class="pa" href="../../BGDatabase/HowToUse">How To Use</a>
        <a class="pa" href="../../BGDatabase/Videos">Videos</a>
        <a class="pa" href="../../BGDatabase/ExampleBreakdown">Example Breakdown</a>
        <a class="pa" href="../../BGDatabase/SupportedFields">Fields</a>
        <a class="pa" href="../../BGDatabase/ExportImport">Export Import</a>
        <a class="pa" href="../../BGDatabase/DataBinding">Data Binding</a>
        <a class="pa" href="../../BGDatabase/Events">Events</a>
        <a class="pa" href="../../BGDatabase/CodeGeneration">Code Generation</a>
        <a class="pa" href="../../BGDatabase/Addons">Addons</a>
    </div>
    <div class="mdl-cell mdl-cell--9-col mdl-cell--6-col-tablet mdl-cell--3-col-phone">
        <div class="bg-main mdl-shadow--3dp">
            <div class="bg-main-title">
                <h3>Misc</h3>
            </div>

            <!--======================================================        BG Database Content              -->
            <div id="content">
            

<h4>Table of content</h4>
<div>
    <ol>
        <li><a href="#editor">Editor assembly</a></li>
        <li><a href="#events">Events</a></li>
        <li><a href="#validation">Validation</a></li>
        <li><a href="#keys">Custom keys</a></li>
        <li><a href="#commandline">Command line</a></li>
        <li><a href="#customFields">Custom fields</a></li>
    </ol>
</div>

<h4 id="editor">Editor assembly</h4>

<p>
    Mostly, database works inside Editor assembly the same way as it works at runtime, meaning you can develop your own Editor tools on top of the database
</p>
<p>
    Use generated classes to access database. To save database in Editor via C# code, use this call:
</p>
<pre class="nomargin"><code class="language-csharp">
    BansheeGz.BGDatabase.Editor.BGRepoSaver.SaveRepo();
</code></pre>
<p>
    To assign unity asset field values, use SetAsset method, defined on each unity asset field and available in Editor assembly (this method is not available at runtime assembly)
</p>
<pre class="nomargin"><code class="language-csharp">
    SetAsset(int entityIndex, UnityEngine.Object asset)
</code></pre>


<h4 id="events">Events</h4>

<p>
    Events let use listen to database changes, like changing the field or entity, adding or removing entities.
</p>

<h6>How to use?</h6>

<p>
    Add your listeners, like this
</p>
<pre class="nomargin"><code class="language-csharp">
    private void AddListeners()
    {
        var events = BGRepo.I.Events;

        //listen to particular entity (row)
        events.AddEntityUpdatedListener(new BGId("some-entity-id"), EntityUpdated);
        events.AddEntityDeletedListener(new BGId("some-entity-id"), EntityDeleted);

        //listen to all entities (rows)
        events.AddAnyEntityAddedListener(new BGId("some-meta-id"), SomeEntityAdded);
        events.AddAnyEntityDeletedListener(new BGId("some-meta-id"), SomeEntityDeleted);
        events.AddAnyEntityUpdatedListener(new BGId("some-meta-id"), SomeEntityUpdated);

        //listen to some field change
        events.AddFieldListener(new BGId("some-field-id"), FieldChanged);
    }

    //------------------------------------------------
    //            Field changed
    //------------------------------------------------
    private void FieldChanged(object sender, BGEventArgsField e)
    {
        Debug.Log("The Field is changed " + e.Entity.Name);
    }

    //------------------------------------------------
    //             any entity (row)
    //------------------------------------------------
    private void SomeEntityUpdated(object sender, BGEventArgsAnyEntityUpdated e)
    {
        Debug.Log("Some Entity Updated " + e.Entity.Name);
    }

    private void SomeEntityDeleted(object sender, BGEventArgsAnyEntity e)
    {
        Debug.Log("Some Entity Deleted " + e.Entity.Id);
    }

    private void SomeEntityAdded(object sender, BGEventArgsAnyEntity e)
    {
        //note, fields are not available here
        Debug.Log("Some Entity Added " + e.Entity.Id);
    }

    //------------------------------------------------
    //             particular entity (row)
    //------------------------------------------------
    private void EntityDeleted(object sender, BGEventArgsEntity e)
    {
        Debug.Log("The Entity Deleted " + e.Entity.Id);
    }

    private void EntityUpdated(object sender, BGEventArgsEntityUpdated e)
    {
        Debug.Log("The Entity Updated " + e.Entity.Name);
    }
</code></pre>

<p>
    Do not forget to remove listeners, as soon as they are not needed.
    For example in you MonoBehaviour classes, use OnDestroy method to remove listeners.
</p>
<p>
    Use corresponding events.RemoveXXX method to remove a listener.
</p>



<h4 id="validation">Validation</h4>

<p>
    Data validation allows to set the rules to validate data.
    Validation works in Unity Editor only and has no effect at runtime.
    To turn on validation, press on "Validation off" button at the top left of BGDatabase window.
</p>

<h6>Validation types</h6>
<ol>
    <li><a href="#data">Database data validation</a></li>
    <li><a href="#scene">Scene objects validation</a> (Binders and BGEntityGo components)</li>
</ol>

<h6 id="data">Database data validation</h6>
<table class="contentTable">
    <tr>
        <th>
            Validation rule
        </th>
        <th>
            Description
        </th>
    </tr>
    <tr>
        <td>Entity name is unique</td>
        <td>If entity has a name, it should be unique</td>
    </tr>
    <tr>
        <td>Entity name is empty</td>
        <td>Entities should have no name (names can be cleared under Configuration tab)</td>
    </tr>
    <tr>
        <td>Entity is singleton</td>
        <td>Only one single entity should exist</td>
    </tr>
    <tr>
        <td>Field is required</td>
        <td>Field should have some value. Only class-based fields are affected, cause struct-based fields always have a value</td>
    </tr>
    <tr>
        <td>Key is unique</td>
        <td>Each <a href="#keys">key</a>, marked as unique, should have 0-1 matching rows. If there are more than 1 matching row, it's considered to be a rule violation.</td>
    </tr>
</table>
<p>
    To review validation log, hover over red E icons as shown on the screenshot below.
    E icon is shown only if at least one error exists.
</p>
<div class="bg-image">
    <a href="../../images/BGDatabase/Validation1.png"><img style="width: 400px" src="../../images/BGDatabase/Validation1.png"></a>
</div>

<h6  id="scene">Scene objects validation</h6>
<p>
    Following BGDatabase scene components can also be validated (using Scene Explorer tab).
</p>
<ol>
    <li>BGEntityGo components</li>
    <li>Generated Monobehaviour classes (extending from BGEntityGo)</li>
    <li><a href="../DataBinding">Data binders</a></li>
</ol>
<p>
    Any component, which has an error, will be highlighted.
</p>


<h4 id="keys">Custom keys</h4>
<p>
    Custom key is a user defined key, which can be used to read row(s) quickly.
    It also can be used in rows <a href="#validation">validation</a>
</p>
<p>
    Each key consist of 1-n fields and can be marked as unique. Following fields can be added to a key: bool, int, long, decimal, bool?, int?, long?, string, text, enum, relationSingle.
</p>
<p>
    You can access the matching row(s) directly without searching, using BGKey class or generated methods.
    To access the key use BGMetaEntity.GetKey({keyName}) method.
</p>
<p>
    Keys make row(s) access faster, but uses extra memory and may slow down write (update) operations significantly, so do not use keys for data, which is updated frequently.
</p>
<div class="bg-image">
    <a href="../../images/Blog/Blog14.png"><img style="width: 400px" src="../../images/Blog/Blog14.png"></a>
</div>


<h4 id="commandline">Command Line</h4>
<p>
    Command line utility (Settings->Command line) let you run DDL-like commands with simplified syntax.
</p>
<p>
    Syntax is (use empty line to separate commands):
</p>
<pre>
    COMMAND [Options]
    [Additional options]
</pre>
<p>
    Available commands:
</p>
<ol>
    <li>CREATE TABLE [TableName]<br>
        [FieldName] [FieldType]
    </li>
    <li>ALTER TABLE [TableName]<br>
        ADD [FieldName] [FieldType]<br>
        DROP [FieldName]
    </li>
    <li>DROP TABLE [TableName]</li>
</ol>
<p>
    Example:
</p>
<pre>
    CREATE TABLE MyTable
    MyField1 int
    MyField2 bool

    ALTER TABLE MyTable
    ADD MyField3 int
    DROP MyField1

    DROP TABLE MyTable
</pre>

<h4 id="customFields">Custom fields implementation guide</h4>
<ol>
    <li>Do not use custom fields unless all other alternatives are much worse.
        For example, if your custom field has two properties (int and float) there is no need to create a custom field,
        you can use two basic fields instead (int and float) to store the values.
    </li>
    <li>
        Do not try to create your custom field in your actual project.
        Create and test your custom field using a new, empty project.
        Make sure it works correctly before transferring this field to your project.
        A bug in your implementation can break the whole database
    </li>
    <li>
        Use existing fields implementations as examples.
        Fields implementation sources can be found in Assets\BansheeGz\BGDatabase\Scripts\BGDatabaseSourceCode.unitypackage package (Database\Field\*).
        Fields managers implementation sources can be found in Assets\BansheeGz\BGDatabase\Editor\Scripts\BGDatabaseEditorSourceCode.unitypackage package (Database\Field\*).
    </li>
    <li>
        To create a custom field you need to create two C# classes:
        <ol>
            <li>Class for the field (in runtime assembly)</li>
            <li>Class for the field's manager (in Editor assembly)</li>
        </ol>
    </li>
    <li>
        [Important] Do not try to create your classes from scratch, extend them from existing classes.<br/>
        For your field class:
        <ol>
            <li>If your field value is a class extend your field class from BGFieldCachedClassA class</li>
            <li>If your field value is a struct extend your field class from BGFieldCachedStructA class</li>
        </ol>
        For your field's manager class:
        <ol>
            <li>If your field value can be edited "in place" (like primitive fields: int, float, string)- extend your field's manager class from BGFieldManagerInlinedA class</li>
            <li>If your field value can be edited in popup window, which can be opened by clicking on cell button
                (like complex fields: bounds, assets)- extend your field's manager class from BGFieldManagerWithButtonA class</li>
        </ol>
    </li>
    <li>
        The methods/properties, which need to be implemented for your field class:
        <ol>
            <li>ToBytes/FromBytes- for binary serialization</li>
            <li>ToString/FromString- for string serialization</li>
            <li>CreateFieldFactory- utility method for creating new fields</li>
            <li>Implement ICloneable interface for your value type if it's a class (not struct)</li>
            <li>ValueSize property if your value type is a struct</li>
        </ol>
    </li>
    <li>
        If you have difficulties implementing your own custom field- contact us and send us full source code for your value type (class/struct).
        You can skip its methods but all fields which needs to be saved inside database need to be included.
    </li>
</ol>
            </div>

            <!--======================================================       BG Database Footer               -->
        </div>

    </div>
</div>



        <!--======================================================      Root Footer               -->
        <footer class="bg-footer mdl-mega-footer" style="clear:both;">
            <div class="mdl-mega-footer--top-section">
                <div class="mdl-mega-footer--middle-section bg-footer-email">
                    <table>
                        <tr>
                            <td>
                                <script language="JavaScript">
                                    writeEmail("support", "bansheegz.com")
                                </script>
                            </td>
                            <td>
                                or
                            </td>
                            <td>
                                <script language="JavaScript">
                                    writeEmail("admin", "bansheegz.com")
                                </script>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div style="text-align: center">
                <div id="share" style="display: inline-block;"></div>
            </div>
        </footer>
    </div>
</div>


</div>

<script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>

</body>
</html>
