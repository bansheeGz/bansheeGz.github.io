<!doctype html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-76367732-7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-76367732-7');
    </script>

    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="BG Database is an in-game data management system for Unity3D game engine with Google Sheets and Excel integration">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    
    <title>BansheeGz</title>

    <!-- Page styles -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="../../../../css/font-awesome.min.css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.min.css">

    <link rel="stylesheet" href="../../../../css/main.css">
    <link rel="stylesheet" href="../../../../css/page.css">

    <link rel="icon" type="image/png" href="../../../../images/BGIcon.png"/>
</head>
<body>


<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<style>
    #aBox a {
        color: white;
        font: 15px Helvetica, Arial, Sans-Serif;
    }

    #bg-navigation a {
        background-position: 50px;
    }
</style>


<script>
    function writeEmail(whom, at) {
        document.write("<a href='mail" + "to:" + whom + "@" + at + "'>" + whom + "@" + at + "</a>");
    }
</script>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

    <!--======================================================       Root  Header               -->
    <div class="bg-header mdl-layout__header mdl-layout__header--waterfall">
        <div class="mdl-layout__header-row" id="header">
          <span style="margin-left: -40px;">
              <a class="bg-header-a" href="/"><img src="../../../../images/BGIconBig.png"></a>
          </span>
            <!-- Add spacer, to align navigation to the right in desktop -->
            <div class="mdl-layout-spacer"></div>
            <!-- Navigation -->
            <div class="bg-navigation-bag" id="bg-navigation">
                <nav class="bg-navigation mdl-navigation">
                    <a class="mdl-navigation__link mdl-typography--text-uppercase bg-navigation_link_active"
                       href="../../../../BGDatabase">BG`Database</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../../../BGLocalization">BG`Localization</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../../../BGCurve">BG`Curve</a>
<!--                    <a class="mdl-navigation__link mdl-typography&#45;&#45;text-uppercase "-->
<!--                       href="../../../../BGCurve/BGSplineColliders">BG`Spline_Colliders</a>-->
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../../../Blog">Blog</a>
                    <a class="mdl-navigation__link mdl-typography--text-uppercase "
                       href="../../../../Support">Support</a>
                </nav>
            </div>
            <button class="bg-menu-mobile mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect"
                    id="more-button">
                <i class="material-icons">more_vert</i>
            </button>
            <ul class="bg-menusub-mobile mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect"
                for="more-button">
                <li class="mdl-menu__item"><a href="../../../../BGDatabase">BG Database</a></li>
                <li class="mdl-menu__item"><a href="../../../../BGLocalization">BG Localization</a></li>
                <li class="mdl-menu__item"><a href="../../../../BGCurve">BG Curve</a></li>
                <li class="mdl-menu__item"><a href="../../../../Support">Support</a></li>
            </ul>
        </div>
    </div>

<!--        <div style="min-height: 5px;background-color: #CCCCCC"></div>-->
<!--        <div id="aBox" style="background-color: #ff69b4;height: 20px;color: white;text-align: center;">
            <b>
                MESSAGE HERE
        </b>
    </div>-->

    <div class="mdl-layout__content">
        <a name="top"></a>

        <!--======================================================        Content (from Root)              -->
        




<link rel="stylesheet" href="../../../../css/bgdatabase.css">
<link rel="stylesheet" href="../../../../css/magnific-popup.css">
<script src="../../../../js/jquery.magnific-popup.min.js"></script>

<script>
    $(document).ready(function () {
        $('.bg-image').magnificPopup({
            delegate: 'a',
            type: 'image',
//            gallery:{enabled:true},
            closeOnContentClick: true
        });
    });
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/rainbow.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!--======================================================       BG Database Header               -->


<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--hide-phone bg-sm  mdl-shadow--3dp">
        <ul id="leftmenu">
            <li class="pli databaseicon ">
                <script async src="https://cse.google.com/cse.js?cx=e1930f586f83c4862">
                </script>
                <div class="gcse-searchbox-only"></div>
                <a class="pa" href="../../../../BGDatabase">BG Database Home</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Setup">Setup</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/HowToUse">How to use</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/GUIOverview">GUI overview</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/GUITips">GUI tips and tricks</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/CodeExamples">Code Examples</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Videos">Video guides</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/SupportedFields">Field types</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ExportImport">Export Import</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/DataBinding">Data Binding</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/GraphEditor">Graph Editor</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/MergeTool">Merge Tools</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Misc">Misc</a>
                    </li>
                    <li class="cli downloadicon ">
                        <a class="ca" href="../../../../BGDatabase/Downloads">Downloads</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../../../BGDatabase/CodeGeneration">Code Generation</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/CodeGeneration/ExtensionClasses">Extension Classes</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/CodeGeneration/MonoBehaviourClasses">MonoBehavior
                            Classes</a>
                    </li>
                    <!--
                                        <li class="cli ">
                                            <a class="ca" href="../../../../BGDatabase/CodeGeneration/DnaClasses">Dna Classes</a>
                                        </li>
                    -->
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../../../BGDatabase/ThirdParty">Third-Party Integration</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/Excel">Excel</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/GoogleSheets">Google Sheets</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/Bolt">Unity Visual Scripting (ex-Bolt)</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/Behavior">Unity Behavior</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/Playmaker">Playmaker</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/FlowCanvas">Flow Canvas</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/NodeCanvas">Node Canvas</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/BehaviorDesigner">Behavior Designer</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/UNode">UNode</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/ThirdParty/GameCreator">Game Creator</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../../../BGDatabase/Addons">Addons</a>
                <ul>
                    <li class="cli  plic ">
                        <a class="ca" href="../../../../BGDatabase/Addons/SaveLoad">Save Load</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/CodeGeneration">Code Generation</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/LazyLoad">Lazy Load</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/LiveUpdate">Live Update</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/Multithreading">Multithreading</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/Modding">Modding</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/Settings">Settings</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/Partition">Partitions</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/Diagram">Diagram</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/Addons/Localization">Localization</a>
                    </li>
                </ul>
            </li>
            <li class="pli ">
                <a class="pa " href="../../../../BGDatabase/API">API</a>
                <ul>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/API/BGRepo">BGRepo</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/API/BGMetaEntity">BGMetaEntity</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/API/BGEntity">BGEntity</a>
                    </li>
                    <li class="cli ">
                        <a class="ca" href="../../../../BGDatabase/API/BGField">BGField</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="mdl-cell--hide-desktop mdl-cell--hide-tablet mdl-cell--4-col-phone">
        <a class="pa" href="../../../../BGDatabase">BG BGDatabase Home</a>
        <a class="pa" href="../../../../BGDatabase/Setup">Setup</a>
        <a class="pa" href="../../../../BGDatabase/HowToUse">How To Use</a>
        <a class="pa" href="../../../../BGDatabase/Videos">Video guides</a>
        <a class="pa" href="../../../../BGDatabase/ExampleBreakdown">Example Breakdown</a>
        <a class="pa" href="../../../../BGDatabase/SupportedFields">Fields</a>
        <a class="pa" href="../../../../BGDatabase/ExportImport">Export Import</a>
        <a class="pa" href="../../../../BGDatabase/DataBinding">Data Binding</a>
        <a class="pa" href="../../../../BGDatabase/Events">Events</a>
        <a class="pa" href="../../../../BGDatabase/CodeGeneration">Code Generation</a>
        <a class="pa" href="../../../../BGDatabase/Addons">Addons</a>
    </div>
    <div class="mdl-cell mdl-cell--9-col mdl-cell--6-col-tablet mdl-cell--3-col-phone">
        <div class="bg-main mdl-shadow--3dp">
            <div class="bg-main-title">
                <h3>Save Load</h3>
                
                <div style="margin-bottom: 10px;">
                    <div class="subTitle"><a class="backButton" href="../">&#8592; Back</a> Save Load (Built-in controller)</div>
                </div>
                
            </div>

            <!--======================================================        BG Database Content              -->
            <div id="content">
                



<h4>Description</h4>
[version 1.8.12 is required] SaveLoad built-in controller prevents new rows, added to default database, from removal while loading data with SaveLoad addon
for tables with "Remove orphaned" parameter on.
If your game is not publicly available, there is no problem (just yet), cause there are no saved games,
but if you want to be able to add new rows to default database after public release for the tables with "Remove orphaned" parameter on, please, read this article

<h4>Problem description</h4>
<p>
    When table has "Remove orphaned" parameter on, it's not possible to add new rows to the default database, cause
    these rows are deleted after game loading.
</p>
<p>
    Here is an example from our <a href="../../../Downloads/Example3DBasic">3d example project</a>,
    <code>Collectables</code> nested table has "Add missing" and "Remove orphaned" parameters on,
</p>
<div class="bg-image">
    <a href="../../../../images/BGDatabase/SaveLoadAddon10.png"><img style="width: 200px"
                                                               src="../../../../images/BGDatabase/SaveLoadAddon10.png"></a>
</div>
<p>
    meaning after loading all rows from default database are replaced with previously saved rows
</p>
<p>
    So, on the screenshot below our initial default database on the top and modified database after some game playing at
    the bottom.
    Modified database is saved with SaveLoad addon.
</p>
<div class="bg-image">
    <a href="../../../../images/BGDatabase/SaveLoadAddon11.png"><img style="width: 200px"
                                                               src="../../../../images/BGDatabase/SaveLoadAddon11.png"></a>
</div>
<p>
    Now let's say we want to add a new scene and add some collectables to it, but unfortunately, after game loading
    these collectables are removed
</p>
<div class="bg-image">
    <a href="../../../../images/BGDatabase/SaveLoadAddon12.png"><img style="width: 200px"
                                                               src="../../../../images/BGDatabase/SaveLoadAddon12.png"></a>
</div>
<p>
    This is because the collectables were saved when NewScene did not exist, so how can we prevent NewScene's
    collectables from removing while game loading?
    Prior to v.1.8.12, preventing new rows from removal was possible with custom C# row controller,
    now SaveLoad addon has a builtin controller to address this problem
</p>

<h4>How to set up built-in controller</h4>
<ol>
    <li>Create <code>SYS_PROPERTY</code> table, add <code>value</code> field with <code>string</code> type
        and add a row with name=<code>dbVersion</code> and value=<code>1</code>.
        We assume, that at this point your game is already publicly available and users already have the saved games,
        so the initial <code>dbVersion</code>=0 and now we increase it by 1.
        if your game is not publicly available yet, and you want to simply test this feature,
        do not forget to revert all <code>dbVersion</code> values to zero after testing (including <code>SYS_PROPERTY.dbVersion</code>)
        <div class="bg-image">
            <a href="../../../../images/BGDatabase/SaveLoadAddon13.png"><img style="width: 200px"
                                                                       src="../../../../images/BGDatabase/SaveLoadAddon13.png"></a>
        </div>
    </li>
    <li>
        Include <code>SYS_PROPERTY.value</code> field to merge settings as shown on the screenshot below
        <div class="bg-image">
            <a href="../../../../images/BGDatabase/SaveLoadAddon16.png"><img style="width: 200px"
                                                                       src="../../../../images/BGDatabase/SaveLoadAddon16.png"></a>
        </div>
    </li>
    <li>
        Now you need to add <code>dbVersion</code> <code>int</code> field to every table with "Add missing" "Remove
        orphaned" parameters turned on.
        In our case we have only one <code>Collectables</code> table with these parameters, so we need to add this field
        to <code>Collectables</code> table.
        Also, if the table is a nested table, we can also add this field to the parent table, in our case it's a <code>Scene</code>
        table.
        Keep in mind, that adding <code>dbVersion</code> to the parent table will affect all nested tables (if they have
        "Remove orphaned" parameter on),
        in our case there is only one nested table, so we can safely do this.
        <p>
            To make sure, the setup is correct, click on the "Check status" button and make sure the builtin controller
            status is ok
            and the number of affected tables matches the number of tables with <code>dbVersion</code> field.
        </p>
        <div class="bg-image">
            <a href="../../../../images/BGDatabase/SaveLoadAddon17.png"><img style="width: 200px"
                                                                       src="../../../../images/BGDatabase/SaveLoadAddon17.png"></a>
        </div>
        For the rows, we want to preserve, we need to set the same <code>dbVersion</code> value as <code>SYS_PROPERTY.dbVersion</code>
        value, which is currently <code>1</code> (it's very important to use the same value)
        <div class="bg-image">
            <a href="../../../../images/BGDatabase/SaveLoadAddon14.png"><img style="width: 200px"
                                                                       src="../../../../images/BGDatabase/SaveLoadAddon14.png"></a>
        </div>
        Now, if you load previously saved game, the new collectables will be preserved
        <div class="bg-image">
            <a href="../../../../images/BGDatabase/SaveLoadAddon15.png"><img style="width: 200px"
                                                                       src="../../../../images/BGDatabase/SaveLoadAddon15.png"></a>
        </div>

    </li>
    <li>
        The 3 steps above is actually enough, but it's worth mentioning, that the same trick will work for all future
        updates as well.
        Let's say you released the game update with 3 scenes, and now you want to add 2 more scenes.
        All you need to do is to increase <code>SYS_PROPERTY.dbVersion</code> by 1, from 1 to 2, and add new scenes with <code>dbVersion</code>=2
        <div class="bg-image">
            <a href="../../../../images/BGDatabase/SaveLoadAddon18.png"><img style="width: 200px"
                                                                       src="../../../../images/BGDatabase/SaveLoadAddon18.png"></a>
        </div>
    </li>
</ol>

<h4>How built-in controller works</h4>
The controller has 2 functions:
<ol>
    <li>It prevents <code>SYS_PROPERTY.dbVersion</code> value update while saved data loading.
        It's a very important step, so <code>SYS_PROPERTY.dbVersion</code> should always be the latest value from default database,
        so when you save the data, this latest value should be saved.
    </li>
    <li>
        During removal phase of saved data loading, the controller prevents a row removal if the row's <code>dbVersion</code> value is greater
        than <code>SYS_PROPERTY.dbVersion</code> value from saved data.
    </li>
</ol>
<a href="../../../Downloads/Example3DBasic/SaveLoadMergeSettings">This page</a> contains C# code for custom row controller, which uses the same approach
            </div>
            
            <a class="backToDownloads" href="../" style="margin-top: 10px">&#8592; Back to Save Load</a>
            

            <!--======================================================       BG Database Footer               -->
        </div>

    </div>
</div>



        <!--======================================================      Root Footer               -->
        <footer class="bg-footer mdl-mega-footer" style="clear:both;">
            <div class="mdl-mega-footer--top-section">
                <div class="mdl-mega-footer--middle-section bg-footer-email">
                    <table>
                        <tr>
                            <td>
                                <script language="JavaScript">
                                    writeEmail("support", "bansheegz.com")
                                </script>
                            </td>
                            <td>
                                or
                            </td>
                            <td>
                                <script language="JavaScript">
                                    writeEmail("admin", "bansheegz.com")
                                </script>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div style="text-align: center">
                <div id="share" style="display: inline-block;"></div>
            </div>
        </footer>
    </div>
</div>


</div>

<script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>

</body>
</html>
